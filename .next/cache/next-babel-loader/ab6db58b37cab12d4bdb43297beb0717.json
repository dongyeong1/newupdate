{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectDestructuringEmpty from \"@babel/runtime/helpers/esm/objectDestructuringEmpty\";\n\nvar _jsxFileName = \"/Users/dong/CapstonProject/component/map/selectMap.js\",\n    _s = $RefreshSig$(),\n    _templateObject;\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { GoogleMap, LoadScript } from '@react-google-maps/api';\nimport { Polyline, Marker, StreetViewPanorama, MarkerClusterer } from '@react-google-maps/api';\nimport { InfoWindow } from '@react-google-maps/api';\nimport Router from 'next/router';\nimport { LOAD_MAP_REQUEST } from '../../reducers/map';\nimport { MOVING_MAP_REQUEST, BIKE_MAP_REQUEST, RUNNING_MAP_REQUEST, SEARCH_MAP_REQUEST, LOAD_MY_LOCATION_REQUEST } from '../../reducers/map';\nimport { Input, Button, Row, Col, Card } from 'antd';\nimport GeomHandle from '../GoogleMap';\nimport SearchList from '../SearchList';\nimport Link from 'next/link';\nimport styled from \"styled-components\";\nimport wrapper from '../../store/configureStore';\nvar lat = 1;\nvar lng = 2;\n\nfunction selectMap(_ref) {\n  _s();\n\n  var _this = this;\n\n  _objectDestructuringEmpty(_ref);\n\n  var _useSelector = useSelector(function (state) {\n    return state.map;\n  }),\n      myLocation = _useSelector.myLocation;\n\n  var _useState = useState({\n    lat: 35.891530332213954,\n    lng: 128.60911511774802\n  }),\n      geom = _useState[0],\n      setGeom = _useState[1];\n\n  function getLocation() {\n    if (navigator.geolocation) {\n      // GPS를 지원하면\n      navigator.geolocation.getCurrentPosition(function (position) {\n        setGeom({\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        });\n        dispatch({\n          type: LOAD_MY_LOCATION_REQUEST,\n          data: {\n            north: {\n              lat: mapref.getBounds().getNorthEast().lat(),\n              lng: mapref.getBounds().getNorthEast().lng()\n            },\n            south: {\n              lat: mapref.getBounds().getSouthWest().lat(),\n              lng: mapref.getBounds().getSouthWest().lng()\n            },\n            event: mapState\n          }\n        });\n      }, function (error) {\n        console.error(error);\n      }, {\n        enableHighAccuracy: false,\n        maximumAge: 0,\n        timeout: Infinity\n      });\n    } else {\n      alert('GPS를 지원하지 않습니다');\n    }\n  }\n\n  var _useState2 = useState(false),\n      isState = _useState2[0],\n      setIsState = _useState2[1];\n\n  var _useState3 = useState('B'),\n      mapState = _useState3[0],\n      setMapState = _useState3[1];\n\n  var dispatch = useDispatch();\n  var mapContainerStyle = {\n    marginTop: 60,\n    height: \"400px\",\n    width: \"700px\"\n  };\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.map;\n  }),\n      searchMap = _useSelector2.searchMap; // const [geom ,setGeom]=useState({lat:35.969997373905, lng: 128.45170755523503})\n\n\n  var _useState4 = useState(null),\n      mapref = _useState4[0],\n      setMapRef = _useState4[1];\n\n  useEffect(function () {\n    getLocation();\n  }, []);\n\n  var handleOnLoad = function handleOnLoad(map) {\n    setMapRef(map);\n    console.log('load됨');\n  };\n\n  var handleCenterChanged = function handleCenterChanged() {\n    if (mapref) {\n      //   var zoom=mapref.getZoom()\n      var nt = mapref.getBounds().getNorthEast().lat();\n      var ng = mapref.getBounds().getNorthEast().lng();\n      var st = mapref.getBounds().getSouthWest().lat();\n      var sg = mapref.getBounds().getSouthWest().lng();\n    }\n\n    dispatch({\n      type: MOVING_MAP_REQUEST,\n      data: {\n        north: {\n          lat: mapref.getBounds().getNorthEast().lat(),\n          lng: mapref.getBounds().getNorthEast().lng()\n        },\n        south: {\n          lat: mapref.getBounds().getSouthWest().lat(),\n          lng: mapref.getBounds().getSouthWest().lng()\n        },\n        event: mapState\n      }\n    });\n  }; //////markercluseter\n\n\n  var optionss = {\n    imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m' // so you must have m1.png, m2.png, m3.png, m4.png, m5.png and m6.png in that folder\n\n  };\n\n  function createKey(location) {\n    return location.lat + location.lng;\n  } //////markercluseter\n  ///주소검색\n\n\n  var _useSelector3 = useSelector(function (state) {\n    return state.map;\n  }),\n      searchmapLoading = _useSelector3.searchmapLoading;\n\n  var handleButton = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var currentAddr, _yield$GeomHandle, _lat, _lng;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              currentAddr = document.getElementById('address').value;\n\n              if (!currentAddr) {\n                _context.next = 10;\n                break;\n              }\n\n              _context.next = 4;\n              return GeomHandle(currentAddr);\n\n            case 4:\n              _yield$GeomHandle = _context.sent;\n              _lat = _yield$GeomHandle.lat;\n              _lng = _yield$GeomHandle.lng;\n              setGeom({\n                lat: _lat,\n                lng: _lng\n              });\n              dispatch({\n                type: SEARCH_MAP_REQUEST,\n                data: {\n                  north: {\n                    lat: mapref.getBounds().getNorthEast().lat(),\n                    lng: mapref.getBounds().getNorthEast().lng()\n                  },\n                  south: {\n                    lat: mapref.getBounds().getSouthWest().lat(),\n                    lng: mapref.getBounds().getSouthWest().lng()\n                  },\n                  event: mapState\n                }\n              });\n              console.log('aaa', searchMap);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleButton() {\n      return _ref2.apply(this, arguments);\n    };\n  }(); //주소검색\n  //polyline\n  //   const [propsPosition,setPropsPosition]=useState()\n\n\n  var _useState5 = useState(),\n      propsId = _useState5[0],\n      setPropsId = _useState5[1];\n\n  var _useState6 = useState({\n    lat: '',\n    lng: ''\n  }),\n      infoPosition = _useState6[0],\n      setInfoPosition = _useState6[1];\n\n  var _useState7 = useState(false),\n      target = _useState7[0],\n      setTarget = _useState7[1];\n\n  var _useState8 = useState(Array.from({\n    length: searchMap.length\n  }, function () {\n    return 3;\n  })),\n      strokeWeight = _useState8[0],\n      setStrokeWeight = _useState8[1];\n\n  var strokeWeights = Array.from({\n    length: searchMap.length\n  }, function () {\n    return 3;\n  });\n\n  var polylineClick = function polylineClick(positionData) {\n    setInfoPosition({\n      lat: positionData.gps.coordinates[3][1],\n      lng: positionData.gps.coordinates[3][0]\n    });\n    setPropsId(positionData._id); // setPropsPosition(positionData)\n\n    setTarget(true);\n  };\n\n  function mouseOver(index) {\n    strokeWeights[index] = 10;\n    setStrokeWeight(strokeWeights);\n  }\n\n  function mouseOut(index) {\n    strokeWeights[index] = 3;\n    setStrokeWeight(strokeWeights);\n  } //polyline\n  //infoWindow\n\n\n  var closeClick = function closeClick() {\n    setTarget(false);\n  };\n\n  var divStyle = {\n    background: \"white\",\n    border: \"1px solid #ccc\",\n    padding: 15\n  };\n\n  var oneRoute = function oneRoute() {\n    dispatch({\n      type: LOAD_MAP_REQUEST,\n      data: propsId\n    });\n    Router.push({\n      pathname: '/Route/[id]',\n      query: {\n        id: propsId\n      }\n    });\n    console.log('dong', searchMap);\n  }; //infoWindow\n  //   const [mapState,setMapState]=useState()\n  // const {mapState}=useSelector((state)=>state.map)\n\n\n  var bikeSelectMap = function bikeSelectMap() {\n    setMapState('B');\n    setIsState(true);\n  };\n\n  var runningSelectMap = function runningSelectMap() {\n    setMapState('R');\n    setIsState(true);\n  };\n\n  useEffect(function () {\n    if (mapState === 'B' && isState === true) {\n      dispatch({\n        type: BIKE_MAP_REQUEST,\n        data: {\n          event: mapState,\n          north: {\n            lat: mapref.getBounds().getNorthEast().lat(),\n            lng: mapref.getBounds().getNorthEast().lng()\n          },\n          south: {\n            lat: mapref.getBounds().getSouthWest().lat(),\n            lng: mapref.getBounds().getSouthWest().lng()\n          }\n        }\n      });\n      setIsState(false);\n    } else if (mapState === 'R' && isState === true) {\n      dispatch({\n        type: RUNNING_MAP_REQUEST,\n        data: {\n          event: mapState,\n          north: {\n            lat: mapref.getBounds().getNorthEast().lat(),\n            lng: mapref.getBounds().getNorthEast().lng()\n          },\n          south: {\n            lat: mapref.getBounds().getSouthWest().lat(),\n            lng: mapref.getBounds().getSouthWest().lng()\n          }\n        }\n      });\n      setIsState(false);\n    }\n  }, [mapState, isState]);\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 5\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 9\n    }\n  }, __jsx(Col, {\n    span: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 13\n    }\n  }, __jsx(Input.Search, {\n    loading: searchmapLoading,\n    enterButton: \"\\uAC80\\uC0C9\",\n    onPressEnter: handleButton,\n    id: \"address\",\n    style: {\n      verticalAlign: 'middle',\n      width: '300px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 17\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 81\n    }\n  }), __jsx(Buttons, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    onClick: bikeSelectMap,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 17\n    }\n  }, \"\\uC790\\uC804\\uAC70\"), __jsx(Button, {\n    onClick: runningSelectMap,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 17\n    }\n  }, \"\\uB2EC\\uB9AC\\uAE30\")), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 18\n    }\n  }, searchMap.map(function (p, index) {\n    return __jsx(SearchList, {\n      setInfoPosition: setInfoPosition,\n      setPropsId: setPropsId,\n      setTarget: setTarget,\n      index: index,\n      setStrokeWeight: setStrokeWeight,\n      list: p,\n      key: p.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 27\n      }\n    });\n  }))), __jsx(Col, {\n    span: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 13\n    }\n  }, __jsx(LoadScript, {\n    googleMapsApiKey: \"AIzaSyAYsO2CGL0YCjMoLk29eyitFC2PIJnJbYE\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 13\n    }\n  }, __jsx(GoogleMap, {\n    id: \"marker-example\",\n    mapContainerStyle: mapContainerStyle,\n    zoom: 15,\n    center: geom,\n    onLoad: handleOnLoad,\n    onDragEnd: handleCenterChanged // onZoomChanged={handleCenterChanged}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 11\n    }\n  }, __jsx(MarkerClusterer, {\n    options: optionss,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 9\n    }\n  }, function (clusterer) {\n    return searchMap.map(function (p) {\n      return __jsx(Marker, {\n        key: createKey(p),\n        position: {\n          lat: p.start_latlng[1],\n          lng: p.start_latlng[0]\n        },\n        clusterer: clusterer,\n        icon: {\n          scaledSize: new google.maps.Size(30, 30)\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 21\n        }\n      });\n    });\n  }), searchMap.map(function (m, index) {\n    return __jsx(Polyline, {\n      onRightClick: function onRightClick() {\n        return polylineClick(m);\n      },\n      onMouseOver: function onMouseOver() {\n        return mouseOver(index);\n      },\n      onMouseOut: function onMouseOut() {\n        return mouseOut(index);\n      },\n      options: {\n        strokeWeight: strokeWeight[index],\n        clickable: true,\n        visible: true,\n        strokeColor: '#FF0000',\n        fillColor: '#FF0000'\n      },\n      path: m.gps.coordinates.map(function (p) {\n        return {\n          lat: p[1],\n          lng: p[0]\n        };\n      }),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 13\n      }\n    });\n  }), target && __jsx(InfoWindow, {\n    position: infoPosition,\n    onCloseClick: closeClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 18\n    }\n  }, __jsx(\"div\", {\n    style: divStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 13\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 17\n    }\n  }, \"\\uB3D9\\uC601\"), __jsx(\"button\", {\n    onClick: oneRoute,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 17\n    }\n  }, \"\\uC0C1\\uC138\\uBCF4\\uAE30\"))))))));\n}\n\n_s(selectMap, \"ge1NFWrdPKdnXOFHerNU6E3ypQ4=\", false, function () {\n  return [useSelector, useDispatch, useSelector, useSelector];\n});\n\nexport default selectMap;\nexport var getStaticProps = wrapper.getStaticProps( /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(context) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            context.store.dispatch({\n              type: LOAD_MY_LOCATION_REQUEST,\n              data: {\n                north: {\n                  lat: mapref.getBounds().getNorthEast().lat(),\n                  lng: mapref.getBounds().getNorthEast().lng()\n                },\n                south: {\n                  lat: mapref.getBounds().getSouthWest().lat(),\n                  lng: mapref.getBounds().getSouthWest().lng()\n                },\n                event: mapState\n              }\n            });\n            context.store.dispatch(END);\n            _context2.next = 4;\n            return context.store.sagaTask.toPromise();\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nvar Buttons = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n\\n\\nButton:hover {\\n    background:#1683e8;\\n    border-color: #1683e8;\\n    color: #fff;\\n  }\\n\\n  Button:focus {\\n    background:#1683e8;\\n    color: #fff;\\n  }\\n\\n\\n\"])));\n_c = Buttons;\n\nvar _c;\n\n$RefreshReg$(_c, \"Buttons\");","map":{"version":3,"sources":["/Users/dong/CapstonProject/component/map/selectMap.js"],"names":["React","useState","useEffect","useDispatch","useSelector","GoogleMap","LoadScript","Polyline","Marker","StreetViewPanorama","MarkerClusterer","InfoWindow","Router","LOAD_MAP_REQUEST","MOVING_MAP_REQUEST","BIKE_MAP_REQUEST","RUNNING_MAP_REQUEST","SEARCH_MAP_REQUEST","LOAD_MY_LOCATION_REQUEST","Input","Button","Row","Col","Card","GeomHandle","SearchList","Link","styled","wrapper","lat","lng","selectMap","state","map","myLocation","geom","setGeom","getLocation","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","dispatch","type","data","north","mapref","getBounds","getNorthEast","south","getSouthWest","event","mapState","error","console","enableHighAccuracy","maximumAge","timeout","Infinity","alert","isState","setIsState","setMapState","mapContainerStyle","marginTop","height","width","searchMap","setMapRef","handleOnLoad","log","handleCenterChanged","nt","ng","st","sg","optionss","imagePath","createKey","location","searchmapLoading","handleButton","currentAddr","document","getElementById","value","propsId","setPropsId","infoPosition","setInfoPosition","target","setTarget","Array","from","length","strokeWeight","setStrokeWeight","strokeWeights","polylineClick","positionData","gps","coordinates","_id","mouseOver","index","mouseOut","closeClick","divStyle","background","border","padding","oneRoute","push","pathname","query","id","bikeSelectMap","runningSelectMap","verticalAlign","p","clusterer","start_latlng","scaledSize","google","maps","Size","m","clickable","visible","strokeColor","fillColor","getStaticProps","context","store","END","sagaTask","toPromise","Buttons","div"],"mappings":"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","sourcesContent":["import React, {useState,useEffect} from 'react'\nimport { useDispatch, useSelector } from 'react-redux';\nimport { GoogleMap, LoadScript } from '@react-google-maps/api';\nimport { Polyline ,Marker,StreetViewPanorama,MarkerClusterer} from '@react-google-maps/api';\nimport { InfoWindow } from '@react-google-maps/api';\nimport Router from 'next/router'\nimport {LOAD_MAP_REQUEST} from '../../reducers/map'\nimport { MOVING_MAP_REQUEST,BIKE_MAP_REQUEST,RUNNING_MAP_REQUEST,SEARCH_MAP_REQUEST,LOAD_MY_LOCATION_REQUEST } from '../../reducers/map';\nimport {Input,Button,Row,Col,Card} from 'antd'\nimport GeomHandle from '../GoogleMap'\nimport SearchList from '../SearchList';\nimport Link from 'next/link';\nimport styled from \"styled-components\";\nimport wrapper from '../../store/configureStore';\n\n\n\n  var lat=1\n  var lng=2\n\n\nfunction selectMap({}) {\n    const {myLocation}=useSelector((state)=>state.map)\n\n    const [geom ,setGeom]=useState({\n        lat:35.891530332213954, \n        lng:128.60911511774802\n    })\n\n    function getLocation() {\n        if (navigator.geolocation) { // GPS를 지원하면\n          navigator.geolocation.getCurrentPosition(function(position) {\n             \n            setGeom({\n                lat:position.coords.latitude,\n                lng:position.coords.longitude\n            })\n\n            dispatch({\n                type:LOAD_MY_LOCATION_REQUEST,\n                data:{\n                    north:{\n                      lat:mapref.getBounds().getNorthEast().lat(),\n                      lng:mapref.getBounds().getNorthEast().lng()\n                    },\n                    south:{\n                      lat:mapref.getBounds().getSouthWest().lat(),\n                      lng:mapref.getBounds().getSouthWest().lng()\n                    },\n                    event:mapState\n          \n                  }\n            })\n          }, function(error) {\n            console.error(error);\n          }, {\n            enableHighAccuracy: false,\n            maximumAge: 0,\n            timeout: Infinity\n          });\n        } else {\n          alert('GPS를 지원하지 않습니다');\n        }\n      }\n\n   \n   \n\n    const [isState,setIsState]=useState(false)\n    const [mapState,setMapState]= useState('B')\n\n   \n    const dispatch=useDispatch()\n\n    const mapContainerStyle = {\n    marginTop:60,\n    height: \"400px\",\n    width: \"700px\"\n    };\n  \n\n    const {searchMap}=useSelector((state)=>state.map)\n\n    // const [geom ,setGeom]=useState({lat:35.969997373905, lng: 128.45170755523503})\n    const [mapref, setMapRef] = useState(null);\n\n    useEffect(()=>{\n        getLocation()\n    },[])\n\n\n    const handleOnLoad = map => {\n        setMapRef(map);\n        console.log('load됨')\n      };\n\n      const handleCenterChanged = () => {\n        if (mapref) {\n            \n        //   var zoom=mapref.getZoom()\n          var nt=mapref.getBounds().getNorthEast().lat();\n          var ng=mapref.getBounds().getNorthEast().lng();\n\n          var st=mapref.getBounds().getSouthWest().lat();\n          var sg=mapref.getBounds().getSouthWest().lng();\n\n         \n\n        \n        }\n\n        dispatch({ \n          type:MOVING_MAP_REQUEST,\n          data:{\n            north:{\n                lat:mapref.getBounds().getNorthEast().lat(),\n                lng:mapref.getBounds().getNorthEast().lng()\n              },\n              south:{\n                lat:mapref.getBounds().getSouthWest().lat(),\n                lng:mapref.getBounds().getSouthWest().lng()\n              },\n            event:mapState\n  \n          }\n        })\n      \n      }\n\n      //////markercluseter\n\n\n    const optionss = {\n        imagePath:\n        'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m', // so you must have m1.png, m2.png, m3.png, m4.png, m5.png and m6.png in that folder\n    }\n\n\n    function createKey(location) {\n        return location.lat + location.lng\n    }\n\n      //////markercluseter\n\n\n   ///주소검색\n\n    const {searchmapLoading}=useSelector((state)=>state.map)\n\n\n\n   const handleButton = async() => {\n       const currentAddr = document.getElementById('address').value\n       if (currentAddr){\n         const {lat, lng} = await GeomHandle(currentAddr)\n         setGeom({lat:lat,lng:lng})\n\n         dispatch({\n           type:SEARCH_MAP_REQUEST,\n           data:{\n            north:{\n              lat:mapref.getBounds().getNorthEast().lat(),\n              lng:mapref.getBounds().getNorthEast().lng()\n            },\n            south:{\n              lat:mapref.getBounds().getSouthWest().lat(),\n              lng:mapref.getBounds().getSouthWest().lng()\n            },\n            event:mapState\n  \n          }\n       })\n       console.log('aaa',searchMap)\n\n\n\n      \n       }\n     }\n\n\n   //주소검색\n\n\n\n      //polyline\n\n    //   const [propsPosition,setPropsPosition]=useState()\n\n      const [propsId,setPropsId]=useState()\n\n\n      const [infoPosition,setInfoPosition]=useState({\n        lat:'',\n        lng:'',\n        })\n    \n      const [target,setTarget]=useState(false)\n\n\n      const [strokeWeight,setStrokeWeight]=useState(Array.from({length: searchMap.length}, () => 3))\n      const strokeWeights= Array.from({length: searchMap.length}, () => 3);\n\n\n      const polylineClick=(positionData)=>{\n     \n    \n        setInfoPosition({\n            lat:positionData.gps.coordinates[3][1],\n            lng:positionData.gps.coordinates[3][0]\n        })\n        setPropsId(positionData._id)\n        // setPropsPosition(positionData)\n        setTarget(true)\n        \n    }\n    \n\n    function mouseOver(index){\n        strokeWeights[index]=10\n        setStrokeWeight(strokeWeights)\n    }\n\n    function mouseOut(index){\n        strokeWeights[index]=3\n        setStrokeWeight(strokeWeights)\n\n    }\n\n      //polyline\n\n      //infoWindow\n      const closeClick=()=>{\n        setTarget(false)\n    }\n\n\n\n    const divStyle = {\n        background: `white`,\n        border: `1px solid #ccc`,\n        padding: 15\n    }\n\n\n  const oneRoute=()=>{\n    dispatch({\n               type:LOAD_MAP_REQUEST,\n               data:propsId\n             })\n               \n    Router.push({\n        pathname: '/Route/[id]',\n        query: {id:propsId},\n      });\n\n      console.log('dong',searchMap)\n}\n\n\n      //infoWindow\n\n    //   const [mapState,setMapState]=useState()\n    // const {mapState}=useSelector((state)=>state.map)\n    const bikeSelectMap=()=>{\n        setMapState('B')\n        setIsState(true)\n    }\n\n    const runningSelectMap=()=>{\n        setMapState('R')\n        setIsState(true)\n    }\n   \n    useEffect(()=>{\n\n        if(mapState==='B'&&isState===true){\n            dispatch({\n                type:BIKE_MAP_REQUEST,\n                data:{\n                    event:mapState,\n                    north:{\n                        lat:mapref.getBounds().getNorthEast().lat(),\n                        lng:mapref.getBounds().getNorthEast().lng()\n                      },\n                      south:{\n                        lat:mapref.getBounds().getSouthWest().lat(),\n                        lng:mapref.getBounds().getSouthWest().lng()\n                      },  \n                }\n            })\n            setIsState(false)\n        }else if(mapState==='R'&&isState===true){\n            dispatch({\n                type:RUNNING_MAP_REQUEST,\n                data:{\n                    event:mapState,\n                    north:{\n                        lat:mapref.getBounds().getNorthEast().lat(),\n                        lng:mapref.getBounds().getNorthEast().lng()\n                      },\n                      south:{\n                        lat:mapref.getBounds().getSouthWest().lat(),\n                        lng:mapref.getBounds().getSouthWest().lng()\n                      },\n                }\n            })\n            setIsState(false)\n\n        }\n    },[mapState,isState])\n\n\n\n  \n    \n\n\n  return (\n    <div>\n\n        <Row>\n            <Col span={10}>\n                <Input.Search \n                loading={searchmapLoading} enterButton=\"검색\" onPressEnter={handleButton}\n                id=\"address\"  style={{verticalAlign:'middle' ,width:'300px'}} /><br></br>\n                \n                <Buttons>\n                <Button onClick={bikeSelectMap}>자전거</Button>\n                <Button onClick={runningSelectMap}>달리기</Button> \n                </Buttons>\n\n                 <div>\n                    {\n                        searchMap.map((p,index)=>(\n                            \n                          <SearchList setInfoPosition={setInfoPosition} setPropsId={setPropsId} setTarget={setTarget} index={index} setStrokeWeight={setStrokeWeight} list={p} key={p.id} ></SearchList>\n                            \n                        ))\n                        }\n                </div> \n                \n            </Col>\n\n            <Col span={10}>\n            <LoadScript\n            googleMapsApiKey=\"AIzaSyAYsO2CGL0YCjMoLk29eyitFC2PIJnJbYE\"\n        >\n            \n          <GoogleMap\n            id=\"marker-example\"\n            mapContainerStyle={mapContainerStyle}\n            zoom={15}\n            center={geom}\n            onLoad={handleOnLoad}\n            onDragEnd={handleCenterChanged}\n            // onZoomChanged={handleCenterChanged}\n          >\n\n        <MarkerClusterer options={optionss}>\n                {(clusterer) =>\n                    searchMap.map((p) => (\n                    <Marker  key={createKey(p)} position={{lat:p.start_latlng[1],lng:p.start_latlng[0]}} clusterer={clusterer}  icon={{\n                    scaledSize: new google.maps.Size(30,30),} } />\n                    ))\n                }\n        </MarkerClusterer>\n            \n\n        {searchMap.map((m,index)=>(\n            <Polyline  onRightClick={()=>polylineClick(m)} onMouseOver={()=>mouseOver(index)} onMouseOut={()=>mouseOut(index)}  options={{strokeWeight:strokeWeight[index],clickable:true,visible:true,strokeColor: '#FF0000',fillColor: '#FF0000',}} path={m.gps.coordinates.map((p)=>(\n                {\n                    lat:p[1],\n                    lng:p[0]\n                }\n            ))}></Polyline>\n            \n            ))}\n            \n        {target&&<InfoWindow position={infoPosition} onCloseClick={closeClick}>\n            <div style={divStyle}>\n                <h1>동영</h1>\n                    {/* <Link href={{\n                        pathname:'/Route/[id]',\n                        query: {id:propsId},\n                    }}><a>상세보기</a></Link>\n                     */}\n                <button onClick={oneRoute}>상세보기</button>\n            </div>\n            </InfoWindow>} \n            \n\n        \n       \n            \n          </GoogleMap>\n          </LoadScript>\n            \n            </Col>\n\n        </Row>\n\n    \n\n   \n             \n\n    </div>\n  )\n}\n\n\n\n\nexport default selectMap\n\nexport const getStaticProps=wrapper.getStaticProps(async (context)=>{\n \n    context.store.dispatch({\n            type:LOAD_MY_LOCATION_REQUEST,\n            data:{\n                north:{\n                  lat:mapref.getBounds().getNorthEast().lat(),\n                  lng:mapref.getBounds().getNorthEast().lng()\n                },\n                south:{\n                  lat:mapref.getBounds().getSouthWest().lat(),\n                  lng:mapref.getBounds().getSouthWest().lng()\n                },\n                event:mapState\n      \n              }\n        })\n    context.store.dispatch(END)\n    await context.store.sagaTask.toPromise()\n\n})\n\n\nconst Buttons= styled.div`\n\n\nButton:hover {\n    background:#1683e8;\n    border-color: #1683e8;\n    color: #fff;\n  }\n\n  Button:focus {\n    background:#1683e8;\n    color: #fff;\n  }\n\n\n`\n\n"]},"metadata":{},"sourceType":"module"}