{"ast":null,"code":"var _jsxFileName = \"/Users/dong/CapstonProject/component/map/selectMap.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { GoogleMap, LoadScript } from '@react-google-maps/api';\nimport { Polyline, Marker, StreetViewPanorama, MarkerClusterer } from '@react-google-maps/api';\nimport { InfoWindow } from '@react-google-maps/api';\nimport Router from 'next/router';\nimport { LOAD_MAP_REQUEST } from '../../reducers/map';\nimport { MOVING_MAP_REQUEST, BIKE_MAP_REQUEST, RUNNING_MAP_REQUEST, SEARCH_MAP_REQUEST } from '../../reducers/map';\nimport { Input, Button, Row, Col, Card } from 'antd';\nimport GeomHandle from '../GoogleMap';\nimport SearchList from '../SearchList';\nimport Link from 'next/link';\nimport styled from \"styled-components\";\n\nfunction selectMap({}) {\n  const {\n    0: isState,\n    1: setIsState\n  } = useState(false);\n  const {\n    0: mapState,\n    1: setMapState\n  } = useState('B');\n  const dispatch = useDispatch();\n  const mapContainerStyle = {\n    marginTop: 60,\n    height: \"400px\",\n    width: \"700px\"\n  };\n  const {\n    searchMap\n  } = useSelector(state => state.map); // const [geom ,setGeom]=useState({lat:35.969997373905, lng: 128.45170755523503})\n\n  const {\n    0: mapref,\n    1: setMapRef\n  } = useState(null);\n\n  const handleOnLoad = map => {\n    setMapRef(map);\n    console.log('load됨');\n  };\n\n  const {\n    0: nelat,\n    1: setNelat\n  } = useState();\n  const {\n    0: nelng,\n    1: setNelng\n  } = useState();\n  const {\n    0: swlat,\n    1: setSwlat\n  } = useState();\n  const {\n    0: swlng,\n    1: setSwlng\n  } = useState();\n\n  const handleCenterChanged = () => {\n    if (mapref) {\n      //   var zoom=mapref.getZoom()\n      var nt = mapref.getBounds().getNorthEast().lat();\n      var ng = mapref.getBounds().getNorthEast().lng();\n      var st = mapref.getBounds().getSouthWest().lat();\n      var sg = mapref.getBounds().getSouthWest().lng();\n      setNelat(nt);\n      setNelng(ng);\n      setSwlat(st);\n      setSwlng(sg);\n    }\n\n    dispatch({\n      type: MOVING_MAP_REQUEST,\n      data: {\n        north: {\n          lat: mapref.getBounds().getNorthEast().lat(),\n          lng: mapref.getBounds().getNorthEast().lng()\n        },\n        south: {\n          lat: mapref.getBounds().getSouthWest().lat(),\n          lng: mapref.getBounds().getSouthWest().lng()\n        },\n        event: mapState\n      }\n    });\n  }; //////markercluseter\n\n\n  const optionss = {\n    imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m' // so you must have m1.png, m2.png, m3.png, m4.png, m5.png and m6.png in that folder\n\n  };\n\n  function createKey(location) {\n    return location.lat + location.lng;\n  } //////markercluseter\n  ///주소검색\n\n\n  const {\n    searchmapLoading\n  } = useSelector(state => state.map);\n  const {\n    0: geom,\n    1: setGeom\n  } = useState({\n    lat: 35.969997373905,\n    lng: 128.45170755523503\n  });\n\n  const handleButton = async () => {\n    const currentAddr = document.getElementById('address').value;\n\n    if (currentAddr) {\n      const {\n        lat,\n        lng\n      } = await GeomHandle(currentAddr);\n      setGeom({\n        lat: lat,\n        lng: lng\n      });\n      dispatch({\n        type: SEARCH_MAP_REQUEST,\n        data: {\n          north: {\n            lat: mapref.getBounds().getNorthEast().lat(),\n            lng: mapref.getBounds().getNorthEast().lng()\n          },\n          south: {\n            lat: mapref.getBounds().getSouthWest().lat(),\n            lng: mapref.getBounds().getSouthWest().lng()\n          },\n          event: mapState\n        }\n      });\n      console.log('aaa', searchMap);\n    }\n  }; //주소검색\n  //polyline\n  //   const [propsPosition,setPropsPosition]=useState()\n\n\n  const {\n    0: propsId,\n    1: setPropsId\n  } = useState();\n  const {\n    0: infoPosition,\n    1: setInfoPosition\n  } = useState({\n    lat: '',\n    lng: ''\n  });\n  const {\n    0: target,\n    1: setTarget\n  } = useState(false);\n  const {\n    0: strokeWeight,\n    1: setStrokeWeight\n  } = useState(Array.from({\n    length: searchMap.length\n  }, () => 3));\n  const strokeWeights = Array.from({\n    length: searchMap.length\n  }, () => 3);\n\n  const polylineClick = positionData => {\n    setInfoPosition({\n      lat: positionData.gps.coordinates[3][1],\n      lng: positionData.gps.coordinates[3][0]\n    });\n    setPropsId(positionData._id); // setPropsPosition(positionData)\n\n    setTarget(true);\n  };\n\n  function mouseOver(index) {\n    strokeWeights[index] = 10;\n    setStrokeWeight(strokeWeights);\n  }\n\n  function mouseOut(index) {\n    strokeWeights[index] = 3;\n    setStrokeWeight(strokeWeights);\n  } //polyline\n  //infoWindow\n\n\n  const closeClick = () => {\n    setTarget(false);\n  };\n\n  const divStyle = {\n    background: `white`,\n    border: `1px solid #ccc`,\n    padding: 15\n  };\n\n  const oneRoute = () => {\n    dispatch({\n      type: LOAD_MAP_REQUEST,\n      data: propsId\n    });\n    Router.push({\n      pathname: '/Route/[id]',\n      query: {\n        id: propsId\n      }\n    });\n    console.log('dong', searchMap);\n  }; //infoWindow\n  //   const [mapState,setMapState]=useState()\n  // const {mapState}=useSelector((state)=>state.map)\n\n\n  const bikeSelectMap = () => {\n    setMapState('B');\n    setIsState(true);\n  };\n\n  const runningSelectMap = () => {\n    setMapState('R');\n    setIsState(true);\n  };\n\n  useEffect(() => {\n    if (mapState === 'B' && isState === true) {\n      dispatch({\n        type: BIKE_MAP_REQUEST,\n        data: {\n          event: mapState,\n          north: {\n            lat: mapref.getBounds().getNorthEast().lat(),\n            lng: mapref.getBounds().getNorthEast().lng()\n          },\n          south: {\n            lat: mapref.getBounds().getSouthWest().lat(),\n            lng: mapref.getBounds().getSouthWest().lng()\n          }\n        }\n      });\n      setIsState(false);\n    } else if (mapState === 'R' && isState === true) {\n      dispatch({\n        type: RUNNING_MAP_REQUEST,\n        data: {\n          event: mapState,\n          north: {\n            lat: mapref.getBounds().getNorthEast().lat(),\n            lng: mapref.getBounds().getNorthEast().lng()\n          },\n          south: {\n            lat: mapref.getBounds().getSouthWest().lat(),\n            lng: mapref.getBounds().getSouthWest().lng()\n          }\n        }\n      });\n      setIsState(false);\n    }\n  }, [mapState, isState]);\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 5\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 9\n    }\n  }, __jsx(Col, {\n    span: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 13\n    }\n  }, __jsx(Input.Search, {\n    loading: searchmapLoading,\n    enterButton: \"\\uAC80\\uC0C9\",\n    onPressEnter: handleButton,\n    id: \"address\",\n    style: {\n      verticalAlign: 'middle',\n      width: '300px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 17\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 81\n    }\n  }), __jsx(Buttons, {\n    onClick: bikeSelectMap,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 17\n    }\n  }, \"\\uC790\\uC804\\uAC70\"), __jsx(Buttons, {\n    onClick: runningSelectMap,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 17\n    }\n  }, \"\\uB2EC\\uB9AC\\uAE30\"), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 18\n    }\n  }, searchMap.map((p, index) => __jsx(SearchList, {\n    setInfoPosition: setInfoPosition,\n    setPropsId: setPropsId,\n    setTarget: setTarget,\n    index: index,\n    setStrokeWeight: setStrokeWeight,\n    list: p,\n    key: p.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 27\n    }\n  })))), __jsx(Col, {\n    span: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 13\n    }\n  }, __jsx(LoadScript, {\n    googleMapsApiKey: \"AIzaSyAYsO2CGL0YCjMoLk29eyitFC2PIJnJbYE\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 13\n    }\n  }, __jsx(GoogleMap, {\n    id: \"marker-example\",\n    mapContainerStyle: mapContainerStyle,\n    zoom: 13,\n    center: geom,\n    onLoad: handleOnLoad,\n    onDragEnd: handleCenterChanged // onZoomChanged={handleCenterChanged}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 11\n    }\n  }, __jsx(MarkerClusterer, {\n    options: optionss,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 9\n    }\n  }, clusterer => searchMap.map(p => __jsx(Marker, {\n    key: createKey(p),\n    position: {\n      lat: p.start_latlng[1],\n      lng: p.start_latlng[0]\n    },\n    clusterer: clusterer,\n    icon: {\n      scaledSize: new google.maps.Size(30, 30)\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 21\n    }\n  }))), searchMap.map((m, index) => __jsx(Polyline, {\n    onRightClick: () => polylineClick(m),\n    onMouseOver: () => mouseOver(index),\n    onMouseOut: () => mouseOut(index),\n    options: {\n      strokeWeight: strokeWeight[index],\n      clickable: true,\n      visible: true,\n      strokeColor: '#FF0000',\n      fillColor: '#FF0000'\n    },\n    path: m.gps.coordinates.map(p => ({\n      lat: p[1],\n      lng: p[0]\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 13\n    }\n  })), target && __jsx(InfoWindow, {\n    position: infoPosition,\n    onCloseClick: closeClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 18\n    }\n  }, __jsx(\"div\", {\n    style: divStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 13\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 17\n    }\n  }, \"\\uB3D9\\uC601\"), __jsx(\"button\", {\n    onClick: oneRoute,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 17\n    }\n  }, \"\\uC0C1\\uC138\\uBCF4\\uAE30\"))))))));\n}\n\nexport default selectMap;\nconst Buttons = styled(Button)`\n\n.ant-btn:hover{\n    background: #1683e8;\n    border-color: #1683e8;\n    color: #fff;\n}\n.ant-btn:active {\n    background: #1683e8;\n    color: #fff;\n  }\nButton:hover {\n    background: #1683e8;\n    border-color: #1683e8;\n    color: #fff;\n  }\n\n  Button:active {\n    background: #1683e8;\n    color: #fff;\n  }\n`;","map":{"version":3,"sources":["/Users/dong/CapstonProject/component/map/selectMap.js"],"names":["React","useState","useEffect","useDispatch","useSelector","GoogleMap","LoadScript","Polyline","Marker","StreetViewPanorama","MarkerClusterer","InfoWindow","Router","LOAD_MAP_REQUEST","MOVING_MAP_REQUEST","BIKE_MAP_REQUEST","RUNNING_MAP_REQUEST","SEARCH_MAP_REQUEST","Input","Button","Row","Col","Card","GeomHandle","SearchList","Link","styled","selectMap","isState","setIsState","mapState","setMapState","dispatch","mapContainerStyle","marginTop","height","width","searchMap","state","map","mapref","setMapRef","handleOnLoad","console","log","nelat","setNelat","nelng","setNelng","swlat","setSwlat","swlng","setSwlng","handleCenterChanged","nt","getBounds","getNorthEast","lat","ng","lng","st","getSouthWest","sg","type","data","north","south","event","optionss","imagePath","createKey","location","searchmapLoading","geom","setGeom","handleButton","currentAddr","document","getElementById","value","propsId","setPropsId","infoPosition","setInfoPosition","target","setTarget","strokeWeight","setStrokeWeight","Array","from","length","strokeWeights","polylineClick","positionData","gps","coordinates","_id","mouseOver","index","mouseOut","closeClick","divStyle","background","border","padding","oneRoute","push","pathname","query","id","bikeSelectMap","runningSelectMap","verticalAlign","p","clusterer","start_latlng","scaledSize","google","maps","Size","m","clickable","visible","strokeColor","fillColor","Buttons"],"mappings":"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","sourcesContent":["import React, {useState,useEffect} from 'react'\nimport { useDispatch, useSelector } from 'react-redux';\nimport { GoogleMap, LoadScript } from '@react-google-maps/api';\nimport { Polyline ,Marker,StreetViewPanorama,MarkerClusterer} from '@react-google-maps/api';\nimport { InfoWindow } from '@react-google-maps/api';\nimport Router from 'next/router'\nimport {LOAD_MAP_REQUEST} from '../../reducers/map'\nimport { MOVING_MAP_REQUEST,BIKE_MAP_REQUEST,RUNNING_MAP_REQUEST,SEARCH_MAP_REQUEST } from '../../reducers/map';\nimport {Input,Button,Row,Col,Card} from 'antd'\nimport GeomHandle from '../GoogleMap'\nimport SearchList from '../SearchList';\nimport Link from 'next/link';\nimport styled from \"styled-components\";\n\n\nfunction selectMap({}) {\n\n    const [isState,setIsState]=useState(false)\n    const [mapState,setMapState]= useState('B')\n\n   \n    const dispatch=useDispatch()\n\n    const mapContainerStyle = {\n    marginTop:60,\n    height: \"400px\",\n    width: \"700px\"\n    };\n  \n\n    const {searchMap}=useSelector((state)=>state.map)\n\n    // const [geom ,setGeom]=useState({lat:35.969997373905, lng: 128.45170755523503})\n    const [mapref, setMapRef] = useState(null);\n\n\n    const handleOnLoad = map => {\n        setMapRef(map);\n        console.log('load됨')\n        \n      };\n\n      const [nelat,setNelat]=useState()\n      const [nelng,setNelng]=useState()\n\n      const [swlat,setSwlat]=useState()\n      const [swlng,setSwlng]=useState()\n\n\n\n      const handleCenterChanged = () => {\n        if (mapref) {\n            \n        //   var zoom=mapref.getZoom()\n          var nt=mapref.getBounds().getNorthEast().lat();\n          var ng=mapref.getBounds().getNorthEast().lng();\n\n          var st=mapref.getBounds().getSouthWest().lat();\n          var sg=mapref.getBounds().getSouthWest().lng();\n\n          setNelat(nt)\n          setNelng(ng)\n          setSwlat(st)\n          setSwlng(sg)\n\n        \n        }\n\n        dispatch({ \n          type:MOVING_MAP_REQUEST,\n          data:{\n            north:{\n                lat:mapref.getBounds().getNorthEast().lat(),\n                lng:mapref.getBounds().getNorthEast().lng()\n              },\n              south:{\n                lat:mapref.getBounds().getSouthWest().lat(),\n                lng:mapref.getBounds().getSouthWest().lng()\n              },\n            event:mapState\n  \n          }\n        })\n      \n      }\n\n      //////markercluseter\n\n\n    const optionss = {\n        imagePath:\n        'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m', // so you must have m1.png, m2.png, m3.png, m4.png, m5.png and m6.png in that folder\n    }\n\n\n    function createKey(location) {\n        return location.lat + location.lng\n    }\n\n      //////markercluseter\n\n\n   ///주소검색\n\n    const {searchmapLoading}=useSelector((state)=>state.map)\n\n   const [geom ,setGeom]=useState({lat:35.969997373905, lng: 128.45170755523503})\n\n\n   const handleButton = async() => {\n       const currentAddr = document.getElementById('address').value\n       if (currentAddr){\n         const {lat, lng} = await GeomHandle(currentAddr)\n         setGeom({lat:lat,lng:lng})\n\n         dispatch({\n           type:SEARCH_MAP_REQUEST,\n           data:{\n            north:{\n              lat:mapref.getBounds().getNorthEast().lat(),\n              lng:mapref.getBounds().getNorthEast().lng()\n            },\n            south:{\n              lat:mapref.getBounds().getSouthWest().lat(),\n              lng:mapref.getBounds().getSouthWest().lng()\n            },\n            event:mapState\n  \n          }\n       })\n       console.log('aaa',searchMap)\n\n\n\n      \n       }\n     }\n\n\n   //주소검색\n\n\n\n      //polyline\n\n    //   const [propsPosition,setPropsPosition]=useState()\n\n      const [propsId,setPropsId]=useState()\n\n\n      const [infoPosition,setInfoPosition]=useState({\n        lat:'',\n        lng:'',\n        })\n    \n      const [target,setTarget]=useState(false)\n\n\n      const [strokeWeight,setStrokeWeight]=useState(Array.from({length: searchMap.length}, () => 3))\n      const strokeWeights= Array.from({length: searchMap.length}, () => 3);\n\n\n      const polylineClick=(positionData)=>{\n     \n    \n        setInfoPosition({\n            lat:positionData.gps.coordinates[3][1],\n            lng:positionData.gps.coordinates[3][0]\n        })\n        setPropsId(positionData._id)\n        // setPropsPosition(positionData)\n        setTarget(true)\n        \n    }\n    \n\n    function mouseOver(index){\n        strokeWeights[index]=10\n        setStrokeWeight(strokeWeights)\n    }\n\n    function mouseOut(index){\n        strokeWeights[index]=3\n        setStrokeWeight(strokeWeights)\n\n    }\n\n      //polyline\n\n      //infoWindow\n      const closeClick=()=>{\n        setTarget(false)\n    }\n\n\n\n    const divStyle = {\n        background: `white`,\n        border: `1px solid #ccc`,\n        padding: 15\n    }\n\n\n  const oneRoute=()=>{\n    dispatch({\n               type:LOAD_MAP_REQUEST,\n               data:propsId\n             })\n               \n    Router.push({\n        pathname: '/Route/[id]',\n        query: {id:propsId},\n      });\n\n      console.log('dong',searchMap)\n}\n\n\n      //infoWindow\n\n    //   const [mapState,setMapState]=useState()\n    // const {mapState}=useSelector((state)=>state.map)\n    const bikeSelectMap=()=>{\n        setMapState('B')\n        setIsState(true)\n    }\n\n    const runningSelectMap=()=>{\n        setMapState('R')\n        setIsState(true)\n    }\n   \n    useEffect(()=>{\n\n        if(mapState==='B'&&isState===true){\n            dispatch({\n                type:BIKE_MAP_REQUEST,\n                data:{\n                    event:mapState,\n                    north:{\n                        lat:mapref.getBounds().getNorthEast().lat(),\n                        lng:mapref.getBounds().getNorthEast().lng()\n                      },\n                      south:{\n                        lat:mapref.getBounds().getSouthWest().lat(),\n                        lng:mapref.getBounds().getSouthWest().lng()\n                      },  \n                }\n            })\n            setIsState(false)\n        }else if(mapState==='R'&&isState===true){\n            dispatch({\n                type:RUNNING_MAP_REQUEST,\n                data:{\n                    event:mapState,\n                    north:{\n                        lat:mapref.getBounds().getNorthEast().lat(),\n                        lng:mapref.getBounds().getNorthEast().lng()\n                      },\n                      south:{\n                        lat:mapref.getBounds().getSouthWest().lat(),\n                        lng:mapref.getBounds().getSouthWest().lng()\n                      },\n                }\n            })\n            setIsState(false)\n\n        }\n    },[mapState,isState])\n\n\n\n  \n    \n\n\n  return (\n    <div>\n\n        <Row>\n            <Col span={10}>\n                <Input.Search \n                loading={searchmapLoading} enterButton=\"검색\" onPressEnter={handleButton}\n                id=\"address\"  style={{verticalAlign:'middle' ,width:'300px'}} /><br></br>\n                \n                <Buttons onClick={bikeSelectMap}>자전거</Buttons>\n                <Buttons onClick={runningSelectMap}>달리기</Buttons> \n    \n\n                 <div>\n                    {\n                        searchMap.map((p,index)=>(\n                            \n                          <SearchList setInfoPosition={setInfoPosition} setPropsId={setPropsId} setTarget={setTarget} index={index} setStrokeWeight={setStrokeWeight} list={p} key={p.id} ></SearchList>\n                            \n                        ))\n                        }\n                </div> \n                \n            </Col>\n\n            <Col span={10}>\n            <LoadScript\n            googleMapsApiKey=\"AIzaSyAYsO2CGL0YCjMoLk29eyitFC2PIJnJbYE\"\n        >\n            \n          <GoogleMap\n            id=\"marker-example\"\n            mapContainerStyle={mapContainerStyle}\n            zoom={13}\n            center={geom}\n            onLoad={handleOnLoad}\n            onDragEnd={handleCenterChanged}\n            // onZoomChanged={handleCenterChanged}\n          >\n\n        <MarkerClusterer options={optionss}>\n                {(clusterer) =>\n                    searchMap.map((p) => (\n                    <Marker  key={createKey(p)} position={{lat:p.start_latlng[1],lng:p.start_latlng[0]}} clusterer={clusterer}  icon={{\n                    scaledSize: new google.maps.Size(30,30),} } />\n                    ))\n                }\n        </MarkerClusterer>\n            \n\n        {searchMap.map((m,index)=>(\n            <Polyline  onRightClick={()=>polylineClick(m)} onMouseOver={()=>mouseOver(index)} onMouseOut={()=>mouseOut(index)}  options={{strokeWeight:strokeWeight[index],clickable:true,visible:true,strokeColor: '#FF0000',fillColor: '#FF0000',}} path={m.gps.coordinates.map((p)=>(\n                {\n                    lat:p[1],\n                    lng:p[0]\n                }\n            ))}></Polyline>\n            \n            ))}\n            \n        {target&&<InfoWindow position={infoPosition} onCloseClick={closeClick}>\n            <div style={divStyle}>\n                <h1>동영</h1>\n                    {/* <Link href={{\n                        pathname:'/Route/[id]',\n                        query: {id:propsId},\n                    }}><a>상세보기</a></Link>\n                     */}\n                <button onClick={oneRoute}>상세보기</button>\n            </div>\n            </InfoWindow>} \n            \n\n        \n       \n            \n          </GoogleMap>\n          </LoadScript>\n            \n            </Col>\n\n        </Row>\n\n    \n\n   \n             \n\n    </div>\n  )\n}\n\nexport default selectMap\n\nconst Buttons= styled(Button)`\n\n.ant-btn:hover{\n    background: #1683e8;\n    border-color: #1683e8;\n    color: #fff;\n}\n.ant-btn:active {\n    background: #1683e8;\n    color: #fff;\n  }\nButton:hover {\n    background: #1683e8;\n    border-color: #1683e8;\n    color: #fff;\n  }\n\n  Button:active {\n    background: #1683e8;\n    color: #fff;\n  }\n`"]},"metadata":{},"sourceType":"module"}